# 关于HashMap的容量为什么要用2的幂次方作为基数

HashMap对元素的散列分布可以通过将hash值对容量求模来实现，这样也可以尽量均匀分布元素。看看其内部实现，其并没有直接的求模运算，而是通过一个位运算：
index = hashCode & （length - 1）来计算。

仔细想想，如果length = 2^n , 则上面的等式就变成了：
index = hashCode & (2^n - 1) ,实际上这就是一个以2^n - 1为基数的求模运算，由于位操作远远快于除法运算，所以这样设计主要是出于计算效率考虑。

另外，2^n - 1作为基数还有个好处，其个位为1，这样与不同的hash值做位与运算可以保证奇偶数都能分布，若基数为偶数，其个位为0，则索引均为偶数，会浪费HashMap空间。